replace test connection template parameter with the::net::connection and test connection wrapper for testing

